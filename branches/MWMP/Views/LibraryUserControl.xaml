<UserControl
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:System="clr-namespace:System;assembly=mscorlib"
    xmlns:local="clr-namespace:MWMP"
    xmlns:converter="clr-namespace:MWMP.Models.Converter"
	mc:Ignorable="d"
	x:Class="MWMP.LibraryUserControl"
	x:Name="UserControl">
    <UserControl.Resources>
        <converter:MilisecondsToStringConverter x:Key="msToStringConverter"/>
        <ObjectDataProvider MethodName="GetService" ObjectType="{x:Type local:ModuleManager}" x:Key="LibraryViewModel">
            <ObjectDataProvider.MethodParameters>
                <System:String>GlobalLibrary</System:String>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>
    </UserControl.Resources>
    <StackPanel>
        <ListView DataContext="{Binding Source={StaticResource LibraryViewModel}}" ItemsSource="{Binding MusicFilter}"
                  SelectedItem="{Binding SelectedItem, Mode=OneWayToSource}" GridViewColumnHeader.Click="ListView_Sort" Name="MusicList">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Title"     DisplayMemberBinding="{Binding Title}" />
                    <GridViewColumn Header="Album"     DisplayMemberBinding="{Binding Album}" />
                    <GridViewColumn Header="Track"     DisplayMemberBinding="{Binding Track}" />
                    <GridViewColumn Header="Genre"     DisplayMemberBinding="{Binding Genre}" />
                    <GridViewColumn Header="Performer" DisplayMemberBinding="{Binding Performers}" />
                    <GridViewColumn Header="Duration"  DisplayMemberBinding="{Binding Duration, Converter={StaticResource msToStringConverter}}" />
                </GridView>
            </ListView.View>
            <ListView.Resources>
                <Style TargetType="{x:Type ListViewItem}">
                    <EventSetter Event="MouseDoubleClick" Handler="HandleDoubleClick" />
                </Style>
            </ListView.Resources>
            <ListView.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Play" Command="{Binding PlayContextMenu}"/>
                    <MenuItem Header="Add to current playlist" Command="{Binding AddToPlayList}" />
                    <MenuItem Header="Delete" Command="{Binding DeleteContextMenu}"/>
                </ContextMenu>
            </ListView.ContextMenu>
        </ListView>
        <ListView DataContext="{Binding Source={StaticResource LibraryViewModel}, Path=VideoLibrary}" ItemsSource="{Binding MediaList}" SelectedItem="{Binding SelectedItem, Mode=OneWayToSource}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Title"     DisplayMemberBinding="{Binding Title}" />
                    <GridViewColumn Header="Duration"  DisplayMemberBinding="{Binding Duration, Converter={StaticResource msToStringConverter}}" />
                </GridView>
            </ListView.View>
            <ListView.Resources>
                <Style TargetType="{x:Type ListViewItem}">
                    <EventSetter Event="MouseDoubleClick" Handler="HandleDoubleClick" />
                </Style>
            </ListView.Resources>
            <ListView.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Play" Command="{Binding PlayContextMenu}"/>
                    <MenuItem Header="Add to current playlist" />
                    <MenuItem Header="Delete" />
                </ContextMenu>
            </ListView.ContextMenu>
        </ListView>
        <ListView DataContext="{Binding Source={StaticResource LibraryViewModel}, Path=PlayListLibrary}" ItemsSource="{Binding MediaList}" 
                  SelectedItem="{Binding SelectedItem, Mode=OneWayToSource}" GridViewColumnHeader.Click="ListView_Sort" Name="PlayListList">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Title"     DisplayMemberBinding="{Binding Title}" />
                </GridView>
            </ListView.View>
            <ListView.Resources>
                <Style TargetType="{x:Type ListViewItem}">
                    <EventSetter Event="MouseDoubleClick" Handler="HandleDoubleClick" />
                </Style>
            </ListView.Resources>
            <ListView.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Play" Command="{Binding PlayContextMenu}"/>
                    <MenuItem Header="Add to current playlist" Command="{Binding AddToPlayList}" />
                    <MenuItem Header="Delete" Command="{Binding DeleteContextMenu}"/>
                </ContextMenu>
            </ListView.ContextMenu>
        </ListView>
    </StackPanel>
</UserControl>